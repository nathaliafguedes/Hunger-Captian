{"ast":null,"code":"import axios from \"axios\";\nconst LOGIN_USER_KEY = \"WD_FORUM_LOGIN_USER_KEY\";\nvar baseURL;\n\nif (process.env.REACT_APP_ENVIRONMENT && process.env.REACT_APP_ENVIRONMENT === \"PRODUCTION\") {\n  baseURL = process.env.REACT_APP_API_BASE_URL;\n} else {\n  baseURL = \"http://127.0.0.1:8000\";\n}\n\nconst api = axios.create({\n  baseURL: baseURL,\n  headers: {\n    \"Content-Type\": \"application/json\"\n  }\n});\n/**\n * Add requireToken: true in request config, for API that required Authorization token\n */\n\napi.interceptors.request.use(config => {\n  if (config.requireToken && localStorage.getItem(LOGIN_USER_KEY)) {\n    config.headers.common[\"Authorization\"] = JSON.parse(localStorage.getItem(LOGIN_USER_KEY)).token;\n  }\n\n  return config;\n}, err => {\n  console.error(err);\n});\nexport default class API {\n  constructor() {\n    this.getPosts = async params => {\n      try {\n        const response = await api.get(\"/posts/\", {\n          params\n        });\n        return response.data;\n      } catch (error) {\n        throw new Error(error);\n      }\n    };\n\n    this.addPost = async postBody => {\n      const formData = new FormData();\n\n      for (const key in postBody) {\n        formData.append(key, postBody[key]);\n      }\n\n      try {\n        const response = await api.post(\"/posts/add/\", formData);\n        return response.data;\n      } catch (error) {\n        throw new Error(error);\n      }\n    };\n\n    this.deletePost = async id => {\n      try {\n        return await api.delete(`/posts/delete/${id}/`);\n      } catch (error) {\n        throw new Error(error);\n      }\n    };\n\n    this.getItems = async params => {\n      try {\n        let url = \"/items/\";\n\n        if (params) {\n          url = url + \"?categories=\" + params;\n        }\n\n        const response = await api.get(url);\n        return response.data.results;\n      } catch (error) {\n        throw new Error(error);\n      }\n    };\n  }\n\n}","map":{"version":3,"names":["axios","LOGIN_USER_KEY","baseURL","process","env","REACT_APP_ENVIRONMENT","REACT_APP_API_BASE_URL","api","create","headers","interceptors","request","use","config","requireToken","localStorage","getItem","common","JSON","parse","token","err","console","error","API","getPosts","params","response","get","data","Error","addPost","postBody","formData","FormData","key","append","post","deletePost","id","delete","getItems","url","results"],"sources":["/Users/nathalialeeguedes/Desktop/Hunger-Captain/frontend/src/API.js"],"sourcesContent":["import axios from \"axios\";\nconst LOGIN_USER_KEY = \"WD_FORUM_LOGIN_USER_KEY\";\n\nvar baseURL;\nif (\n  process.env.REACT_APP_ENVIRONMENT &&\n  process.env.REACT_APP_ENVIRONMENT === \"PRODUCTION\"\n) {\n  baseURL = process.env.REACT_APP_API_BASE_URL;\n} else {\n  baseURL = \"http://127.0.0.1:8000\";\n}\n\nconst api = axios.create({\n  baseURL: baseURL,\n  headers: {\n    \"Content-Type\": \"application/json\",\n  },\n});\n\n/**\n * Add requireToken: true in request config, for API that required Authorization token\n */\napi.interceptors.request.use(\n  (config) => {\n    if (config.requireToken && localStorage.getItem(LOGIN_USER_KEY)) {\n      config.headers.common[\"Authorization\"] = JSON.parse(\n        localStorage.getItem(LOGIN_USER_KEY)\n      ).token;\n    }\n\n    return config;\n  },\n  (err) => {\n    console.error(err);\n  }\n);\n\nexport default class API {\n  getPosts = async (params) => {\n    try {\n      const response = await api.get(\"/posts/\", { params });\n      return response.data;\n    } catch (error) {\n      throw new Error(error);\n    }\n  };\n  addPost = async (postBody) => {\n    const formData = new FormData();\n\n    for (const key in postBody) {\n      formData.append(key, postBody[key]);\n    }\n\n    try {\n      const response = await api.post(\"/posts/add/\", formData);\n      return response.data;\n    } catch (error) {\n      throw new Error(error);\n    }\n  };\n  deletePost = async (id) => {\n    try {\n      return await api.delete(`/posts/delete/${id}/`);\n    } catch (error) {\n      throw new Error(error);\n    }\n  };\n\n  getItems = async (params) => {\n    try {\n      let url = \"/items/\";\n      if (params) {\n        url = url + \"?categories=\" + params;\n      }\n      const response = await api.get(url);\n      return response.data.results;\n    } catch (error) {\n      throw new Error(error);\n    }\n  };\n  writeR\n}\n"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,MAAMC,cAAc,GAAG,yBAAvB;AAEA,IAAIC,OAAJ;;AACA,IACEC,OAAO,CAACC,GAAR,CAAYC,qBAAZ,IACAF,OAAO,CAACC,GAAR,CAAYC,qBAAZ,KAAsC,YAFxC,EAGE;EACAH,OAAO,GAAGC,OAAO,CAACC,GAAR,CAAYE,sBAAtB;AACD,CALD,MAKO;EACLJ,OAAO,GAAG,uBAAV;AACD;;AAED,MAAMK,GAAG,GAAGP,KAAK,CAACQ,MAAN,CAAa;EACvBN,OAAO,EAAEA,OADc;EAEvBO,OAAO,EAAE;IACP,gBAAgB;EADT;AAFc,CAAb,CAAZ;AAOA;AACA;AACA;;AACAF,GAAG,CAACG,YAAJ,CAAiBC,OAAjB,CAAyBC,GAAzB,CACGC,MAAD,IAAY;EACV,IAAIA,MAAM,CAACC,YAAP,IAAuBC,YAAY,CAACC,OAAb,CAAqBf,cAArB,CAA3B,EAAiE;IAC/DY,MAAM,CAACJ,OAAP,CAAeQ,MAAf,CAAsB,eAAtB,IAAyCC,IAAI,CAACC,KAAL,CACvCJ,YAAY,CAACC,OAAb,CAAqBf,cAArB,CADuC,EAEvCmB,KAFF;EAGD;;EAED,OAAOP,MAAP;AACD,CATH,EAUGQ,GAAD,IAAS;EACPC,OAAO,CAACC,KAAR,CAAcF,GAAd;AACD,CAZH;AAeA,eAAe,MAAMG,GAAN,CAAU;EAAA;IAAA,KACvBC,QADuB,GACZ,MAAOC,MAAP,IAAkB;MAC3B,IAAI;QACF,MAAMC,QAAQ,GAAG,MAAMpB,GAAG,CAACqB,GAAJ,CAAQ,SAAR,EAAmB;UAAEF;QAAF,CAAnB,CAAvB;QACA,OAAOC,QAAQ,CAACE,IAAhB;MACD,CAHD,CAGE,OAAON,KAAP,EAAc;QACd,MAAM,IAAIO,KAAJ,CAAUP,KAAV,CAAN;MACD;IACF,CARsB;;IAAA,KASvBQ,OATuB,GASb,MAAOC,QAAP,IAAoB;MAC5B,MAAMC,QAAQ,GAAG,IAAIC,QAAJ,EAAjB;;MAEA,KAAK,MAAMC,GAAX,IAAkBH,QAAlB,EAA4B;QAC1BC,QAAQ,CAACG,MAAT,CAAgBD,GAAhB,EAAqBH,QAAQ,CAACG,GAAD,CAA7B;MACD;;MAED,IAAI;QACF,MAAMR,QAAQ,GAAG,MAAMpB,GAAG,CAAC8B,IAAJ,CAAS,aAAT,EAAwBJ,QAAxB,CAAvB;QACA,OAAON,QAAQ,CAACE,IAAhB;MACD,CAHD,CAGE,OAAON,KAAP,EAAc;QACd,MAAM,IAAIO,KAAJ,CAAUP,KAAV,CAAN;MACD;IACF,CAtBsB;;IAAA,KAuBvBe,UAvBuB,GAuBV,MAAOC,EAAP,IAAc;MACzB,IAAI;QACF,OAAO,MAAMhC,GAAG,CAACiC,MAAJ,CAAY,iBAAgBD,EAAG,GAA/B,CAAb;MACD,CAFD,CAEE,OAAOhB,KAAP,EAAc;QACd,MAAM,IAAIO,KAAJ,CAAUP,KAAV,CAAN;MACD;IACF,CA7BsB;;IAAA,KA+BvBkB,QA/BuB,GA+BZ,MAAOf,MAAP,IAAkB;MAC3B,IAAI;QACF,IAAIgB,GAAG,GAAG,SAAV;;QACA,IAAIhB,MAAJ,EAAY;UACVgB,GAAG,GAAGA,GAAG,GAAG,cAAN,GAAuBhB,MAA7B;QACD;;QACD,MAAMC,QAAQ,GAAG,MAAMpB,GAAG,CAACqB,GAAJ,CAAQc,GAAR,CAAvB;QACA,OAAOf,QAAQ,CAACE,IAAT,CAAcc,OAArB;MACD,CAPD,CAOE,OAAOpB,KAAP,EAAc;QACd,MAAM,IAAIO,KAAJ,CAAUP,KAAV,CAAN;MACD;IACF,CA1CsB;EAAA;;AAAA"},"metadata":{},"sourceType":"module"}